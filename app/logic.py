from dataclasses import dataclass
from typing import Literal

from .content import image_links_for_set

# ===== Types =====
Skin = Literal["dry", "normal", "combo", "oily", "unknown"]
Tone = Literal["light", "medium", "tan"]
Undertone = Literal["warm", "cool", "unknown"]
Eyes = Literal["small", "big", "hooded", "almond"]
Occasion = Literal["daily", "date", "party", "photo"]
DetailLevel = Literal["short", "full"]


@dataclass
class Answers:
    skin: Skin
    tone: Tone
    undertone: Undertone
    eyes: Eyes
    occasion: Occasion


# ===== Photo sets =====
def pick_photo_set(a: Answers) -> int:
    # Priority: occasion ‚Üí eyes ‚Üí undertone ‚Üí skin ‚Üí base
    if a.occasion == "date":
        return 2
    if a.occasion == "party":
        return 3
    if a.occasion == "photo":
        return 4

    if a.eyes == "hooded":
        return 5
    if a.eyes == "small":
        return 6

    if a.undertone == "warm":
        return 7
    if a.undertone == "cool":
        return 8

    if a.skin in ("oily", "combo"):
        return 9
    if a.skin == "dry":
        return 10

    return 1


# ===== Summary lines =====
def skin_line(s: Skin) -> str:
    return {
        "dry": "—Å—É—Ö–∞—è ‚Üí —É–≤–ª–∞–∂–Ω–µ–Ω–∏–µ –∏ –∫—Ä–µ–º–æ–≤—ã–µ —Ç–µ–∫—Å—Ç—É—Ä—ã (—Å–∏—è–Ω–∏–µ –≤—ã–≥–ª—è–¥–∏—Ç –ª—É—á—à–µ)",
        "normal": "–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è ‚Üí –ø–æ–¥–æ–π–¥—É—Ç –ø–æ—á—Ç–∏ –≤—Å–µ —Ç–µ–∫—Å—Ç—É—Ä—ã, –ª—É—á—à–µ –ª—ë–≥–∫–∏–µ —Å–ª–æ–∏",
        "combo": "–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è ‚Üí –º–∞—Ç–∏—Ä—É–µ–º –¢-–∑–æ–Ω—É, —â—ë–∫–∏ –æ—Å—Ç–∞–≤–ª—è–µ–º ‚Äú–∂–∏–≤—ã–º–∏‚Äù",
        "oily": "–∂–∏—Ä–Ω–∞—è ‚Üí —Ç–æ–Ω–∫–∏–π —Å–ª–æ–π + —Ñ–∏–∫—Å–∞—Ü–∏—è –≤ –¢-–∑–æ–Ω–µ, –±–µ–∑ ‚Äú–º–∞—Å–∫–∏‚Äù",
        "unknown": "—Ç–∏–ø –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω ‚Üí —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ: –ª—ë–≥–∫–∏–π —Ç–æ–Ω + —Ç–æ—á–µ—á–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è",
    }[s]


def undertone_line(u: Undertone) -> str:
    return {
        "warm": "—Ç—ë–ø–ª—ã–π ‚Üí –ø–µ—Ä—Å–∏–∫–æ–≤—ã–µ, –±–µ–∂–µ–≤—ã–µ, –∑–æ–ª–æ—Ç–∏—Å—Ç—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏",
        "cool": "—Ö–æ–ª–æ–¥–Ω—ã–π ‚Üí —Ä–æ–∑–æ–≤—ã–µ, —è–≥–æ–¥–Ω—ã–µ, —Ö–æ–ª–æ–¥–Ω—ã–µ –±–µ–∂–∏",
        "unknown": "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω ‚Üí –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ –±–µ–∂–µ–≤–æ-—Ä–æ–∑–æ–≤—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏",
    }[u]


def palette_hint(u: Undertone) -> str:
    return {
        "warm": "üé® –û—Ç—Ç–µ–Ω–∫–∏: –ø–µ—Ä—Å–∏–∫, —Ç—ë–ø–ª—ã–π –±–µ–∂, –∫–∞—Ä–∞–º–µ–ª—å, —Ç—ë–ø–ª—ã–π –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π.",
        "cool": "üé® –û—Ç—Ç–µ–Ω–∫–∏: —Ä–æ–∑–æ–≤–æ-–±–µ–∂–µ–≤—ã–π, —Ç–∞—É–ø, —Å–µ—Ä–æ-–∫–æ—Ä–∏—á–Ω–µ–≤—ã–π, —è–≥–æ–¥–Ω—ã–π –Ω—é–¥.",
        "unknown": "üé® –û—Ç—Ç–µ–Ω–∫–∏: –±–µ–∂–µ–≤–æ-—Ä–æ–∑–æ–≤—ã–π, —Å–≤–µ—Ç–ª—ã–π —Ç–∞—É–ø, –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π.",
    }[u]


def eyes_short(e: Eyes) -> str:
    return {
        "small": "–º–∞–ª–µ–Ω—å–∫–∏–µ ‚Üí —Å–≤–µ—Ç –≤–Ω—É—Ç—Ä–∏, —Ç–µ–Ω—å —Ç–æ–ª—å–∫–æ —Å–Ω–∞—Ä—É–∂–∏ (—Ä–∞—Å—Ç—É—à—ë–≤–∫–∞ –≤–≤–µ—Ä—Ö)",
        "big": "–±–æ–ª—å—à–∏–µ ‚Üí –¥–æ–±–∞–≤–ª—è–µ–º –≥–ª—É–±–∏–Ω—É –º—è–≥–∫–æ–π —Ç–µ–Ω—å—é, –±–µ–∑ —Ç—è–∂—ë–ª–æ–≥–æ –Ω–∏–∑–∞",
        "hooded": "–Ω–∞–≤–∏c—à–µ–µ –≤–µ–∫–æ ‚Üí —Ç–µ–Ω–∏ –≤—ã—à–µ —Å–∫–ª–∞–¥–∫–∏, –º—è–≥–∫–∏–µ –ª–∏–Ω–∏–∏, –º–∞—Ç–æ–≤—ã–µ —Ç–µ–∫—Å—Ç—É—Ä—ã",
        "almond": "–º–∏–Ω–¥–∞–ª–µ–≤–∏–¥–Ω—ã–µ ‚Üí —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ: —Ç–µ–Ω—å –≤–æ –≤–Ω–µ—à–Ω–∏–π —É–≥–æ–ª + –¥–∏–∞–≥–æ–Ω–∞–ª—å –∫ –≤–∏—Å–∫—É",
    }[e]


# ===== Detailed eyes guides =====
def eyes_full(e: Eyes) -> str:
    if e == "small":
        return (
            "## üëÅ –ú–∞–ª–µ–Ω—å–∫–∏–µ –≥–ª–∞–∑–∞ ‚Äî –∫–∞–∫ –≤–∏–∑—É–∞–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å\n\n"
            "üéØ **–ó–∞–¥–∞—á–∞ –º–∞–∫–∏—è–∂–∞:** —Å–¥–µ–ª–∞—Ç—å –≥–ª–∞–∑ —à–∏—Ä–µ –∏ ‚Äú–æ—Ç–∫—Ä—ã—Ç—å‚Äù –≤–∑–≥–ª—è–¥, –Ω–µ —É—Ç—è–∂–µ–ª—è—è –≤–µ–∫–æ.\n\n"
            "üó∫ **–ö–∞—Ä—Ç–∞ –∑–æ–Ω:**\n"
            "‚Ä¢ **–°–≤–µ—Ç** ‚Äî –ø–æ–¥–≤–∏–∂–Ω–æ–µ –≤–µ–∫–æ + –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —É–≥–æ–ª\n"
            "‚Ä¢ **–ü–æ–ª—É—Ç–µ–Ω—å** ‚Äî —Ü–µ–Ω—Ç—Ä –≤–µ–∫–∞\n"
            "‚Ä¢ **–¢–µ–Ω—å** ‚Äî —Ç–æ–ª—å–∫–æ –≤–Ω–µ—à–Ω–∏–π —É–≥–æ–ª\n\n"
            "‚úèÔ∏è **–§–æ—Ä–º–∞ —Ä–∞—Å—Ç—É—à—ë–≤–∫–∏:**\n"
            "‚Ä¢ –Ω–∞—á–∏–Ω–∞–π –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ —É–≥–æ–ª–∫–∞\n"
            "‚Ä¢ –≤–µ–¥–∏ –∫–∏—Å—Ç—å **–ø–æ –¥–∏–∞–≥–æ–Ω–∞–ª–∏ –≤–≤–µ—Ä—Ö** –∫ —Ö–≤–æ—Å—Ç–∏–∫—É –±—Ä–æ–≤–∏\n"
            "‚Ä¢ —Ñ–æ—Ä–º–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç **V / –≥–∞–ª–æ—á–∫—É**\n"
            "‚Ä¢ —Ç–µ–Ω—å **–Ω–µ –æ–ø—É—Å–∫–∞–π –≤–Ω–∏–∑**\n\n"
            "üëÅ **–ù–∏–∂–Ω–µ–µ –≤–µ–∫–æ:**\n"
            "‚Ä¢ —Ç–µ–Ω—å —Ç–æ–ª—å–∫–æ –≤–æ **–≤–Ω–µ—à–Ω–µ–π —Ç—Ä–µ—Ç–∏**\n"
            "‚Ä¢ —Ü–µ–Ω—Ç—Ä –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —É–≥–æ–ª –æ—Å—Ç–∞–≤–ª—è–π —Å–≤–µ—Ç–ª—ã–º–∏\n\n"
            "üñå **–ü–æ–¥–≤–æ–¥–∫–∞:**\n"
            "‚Ä¢ –ª—É—á—à–µ —Ç–µ–Ω–∏/–∫–∞—Ä–∞–Ω–¥–∞—à, –∞ –Ω–µ —á—ë—Ä–Ω–∞—è —Å—Ç—Ä–µ–ª–∫–∞\n"
            "‚Ä¢ –ª–∏–Ω–∏—è —Ç–æ–Ω–∫–∞—è –ø–æ –≤–µ—Ä—Ö–Ω–∏–º —Ä–µ—Å–Ω–∏—Ü–∞–º\n"
            "‚Ä¢ —Ö–≤–æ—Å—Ç–∏–∫ ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–π –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –≤–≤–µ—Ä—Ö\n\n"
            "üñ§ **–¢—É—à—å:**\n"
            "‚Ä¢ 1 —Å–ª–æ–π ‚Äî –Ω–∞ –≤—Å–µ —Ä–µ—Å–Ω–∏—Ü—ã\n"
            "‚Ä¢ 2 —Å–ª–æ–π ‚Äî **—Ç–æ–ª—å–∫–æ –≤–æ –≤–Ω–µ—à–Ω–µ–º —É–≥–æ–ª–∫–µ**\n"
            "‚Ä¢ –ø–æ–¥–∫—Ä—É—á–∏–≤–∞–Ω–∏–µ –æ—á–µ–Ω—å –ø–æ–º–æ–≥–∞–µ—Ç\n\n"
            "‚úÖ **–ë—ã—Å—Ç—Ä—ã–π —á–µ–∫:** –µ—Å–ª–∏ **—Ü–µ–Ω—Ç—Ä –≤–µ–∫–∞ —Å–≤–µ—Ç–ª—ã–π** ‚Äî –≥–ª–∞–∑ —É–∂–µ –≤—ã–≥–ª—è–¥–∏—Ç –±–æ–ª—å—à–µ.\n\n"
            "‚ùå **–û—à–∏–±–∫–∞ –Ω–æ–≤–∏—á–∫–∞:** —Ç—ë–º–Ω—ã–µ —Ç–µ–Ω–∏ –ø–æ –≤—Å–µ–º—É –≤–µ–∫—É –∏ –∞–∫—Ç–∏–≤–Ω—ã–π –Ω–∏–∑ ‚Üí –≥–ª–∞–∑ ‚Äú—Å–∂–∏–º–∞–µ—Ç—Å—è‚Äù."
        )

    if e == "hooded":
        return (
            "## üëÅ –ù–∞–≤–∏—Å—à–µ–µ –≤–µ–∫–æ ‚Äî –ª–∏—Ñ—Ç–∏–Ω–≥ –±–µ–∑ —Å—Ç—Ä–µ–ª–æ–∫\n\n"
            "üéØ **–ó–∞–¥–∞—á–∞ –º–∞–∫–∏—è–∂–∞:** –ø—Ä–∏–ø–æ–¥–Ω—è—Ç—å —Ñ–æ—Ä–º—É –≥–ª–∞–∑–∞ –∏ —Å–¥–µ–ª–∞—Ç—å –º–∞–∫–∏—è–∂ –≤–∏–¥–∏–º—ã–º –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∑–≥–ª—è–¥–µ.\n\n"
            "üó∫ **–ö–∞—Ä—Ç–∞ –∑–æ–Ω:**\n"
            "‚Ä¢ **–°–≤–µ—Ç** ‚Äî –ø–æ–¥–≤–∏–∂–Ω–æ–µ –≤–µ–∫–æ\n"
            "‚Ä¢ **–¢–µ–Ω—å** ‚Äî **–≤—ã—à–µ** –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Å–∫–ª–∞–¥–∫–∏\n"
            "‚Ä¢ **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —É–≥–æ–ª** ‚Äî –º–∞–ª–µ–Ω—å–∫–∞—è —Ç–æ—á–∫–∞ —Å–≤–µ—Ç–∞\n\n"
            "‚úèÔ∏è **–§–æ—Ä–º–∞ —Ä–∞—Å—Ç—É—à—ë–≤–∫–∏:**\n"
            "‚Ä¢ —Ç–µ–Ω—å —Å—Ç–∞–≤—å **–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–æ–º –≥–ª–∞–∑–µ** (—Å–º–æ—Ç—Ä–∏ –ø—Ä—è–º–æ)\n"
            "‚Ä¢ —Ä–∞—Å—Ç—É—à—ë–≤—ã–≤–∞–π **–≤–≤–µ—Ä—Ö –∏ –Ω–∞—Ä—É–∂—É**\n"
            "‚Ä¢ —Ñ–æ—Ä–º–∞ ‚Äî –º—è–≥–∫–æ–µ ‚Äú–∫—Ä—ã–ª–æ‚Äù (–ª–∏—Ñ—Ç–∏–Ω–≥)\n\n"
            "üñå **–ü–æ–¥–≤–æ–¥–∫–∞:**\n"
            "‚Ä¢ –∏–∑–±–µ–≥–∞–π —Ç–æ–ª—Å—Ç—ã—Ö —Å—Ç—Ä–µ–ª–æ–∫\n"
            "‚Ä¢ –ª—É—á—à–µ **–º–µ–∂—Ä–µ—Å–Ω–∏—á–∫–∞** + –º–∞–ª–µ–Ω—å–∫–∏–π —Ö–≤–æ—Å—Ç–∏–∫ —Ç–µ–Ω—è–º–∏\n"
            "‚Ä¢ —Ö–≤–æ—Å—Ç–∏–∫ –Ω–∞–ø—Ä–∞–≤–ª—è–π –≤–≤–µ—Ä—Ö\n\n"
            "üëÅ **–ù–∏–∂–Ω–µ–µ –≤–µ–∫–æ:**\n"
            "‚Ä¢ –º–∏–Ω–∏–º—É–º: –ª–∏–±–æ –Ω–µ —Ç—Ä–æ–≥–∞–π, –ª–∏–±–æ –æ—á–µ–Ω—å –º—è–≥–∫–æ –≤–æ –≤–Ω–µ—à–Ω–µ–º —É–≥–ª—É\n\n"
            "üñ§ **–¢—É—à—å:**\n"
            "‚Ä¢ –ø–æ–¥–∫—Ä—É—á–∏–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ\n"
            "‚Ä¢ –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —Ä–µ—Å–Ω–∏—Ü—ã\n\n"
            "‚úÖ **–ë—ã—Å—Ç—Ä—ã–π —á–µ–∫:** —Ç–µ–Ω—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å **–≤–∏–¥–Ω–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ–º –≥–ª–∞–∑–µ**.\n\n"
            "‚ùå **–û—à–∏–±–∫–∞ –Ω–æ–≤–∏—á–∫–∞:** —Ä–∏—Å–æ–≤–∞—Ç—å —Ç–µ–Ω—å —Ç–æ—á–Ω–æ –ø–æ —Å–∫–ª–∞–¥–∫–µ ‚Äî –æ–Ω–∞ ‚Äú–ø—Ä—è—á–µ—Ç—Å—è‚Äù."
        )

    if e == "big":
        return (
            "## üëÅ –ë–æ–ª—å—à–∏–µ –≥–ª–∞–∑–∞ ‚Äî –≥–ª—É–±–∏–Ω–∞ –∏ –±–∞–ª–∞–Ω—Å\n\n"
            "üéØ **–ó–∞–¥–∞—á–∞ –º–∞–∫–∏—è–∂–∞:** –¥–æ–±–∞–≤–∏—Ç—å –≥–ª—É–±–∏–Ω—É –∏ —Å–¥–µ–ª–∞—Ç—å –æ–±—Ä–∞–∑ —Å–æ–±—Ä–∞–Ω–Ω—ã–º.\n\n"
            "üó∫ **–ö–∞—Ä—Ç–∞ –∑–æ–Ω:**\n"
            "‚Ä¢ **–°–≤–µ—Ç** ‚Äî –ø–æ–¥–≤–∏–∂–Ω–æ–µ –≤–µ–∫–æ (–Ω–µ –±–µ–ª—ã–π, –∞ —Å–≤–µ—Ç–ª–æ-–±–µ–∂–µ–≤—ã–π)\n"
            "‚Ä¢ **–¢–µ–Ω—å** ‚Äî –≤–Ω–µ—à–Ω–∏–π —É–≥–æ–ª\n"
            "‚Ä¢ **–ü–æ–ª—É—Ç–µ–Ω—å** ‚Äî –º—è–≥–∫–æ –ø–æ —Å–∫–ª–∞–¥–∫–µ, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –≥–ª—É–±–∏–Ω—É\n\n"
            "‚úèÔ∏è **–§–æ—Ä–º–∞ —Ä–∞—Å—Ç—É—à—ë–≤–∫–∏:**\n"
            "‚Ä¢ —Ä–∞—Å—Ç—É—à—ë–≤–∫–∞ –ø–æ –¥–∏–∞–≥–æ–Ω–∞–ª–∏ –∫ –≤–∏—Å–∫—É\n"
            "‚Ä¢ –±–µ–∑ —Ä–µ–∑–∫–∏—Ö –≥—Ä–∞–Ω–∏—Ü\n\n"
            "üñå **–ü–æ–¥–≤–æ–¥–∫–∞:**\n"
            "‚Ä¢ –º–æ–∂–Ω–æ —Ç–æ–Ω–∫—É—é –ª–∏–Ω–∏—é –ø–æ –≤–µ—Ä—Ö–Ω–∏–º —Ä–µ—Å–Ω–∏—Ü–∞–º\n"
            "‚Ä¢ –±–µ–∑ —Å–∏–ª—å–Ω–æ–≥–æ —É—Ç–æ–ª—â–µ–Ω–∏—è –∫ —Ü–µ–Ω—Ç—Ä—É\n\n"
            "üëÅ **–ù–∏–∂–Ω–µ–µ –≤–µ–∫–æ:**\n"
            "‚Ä¢ –Ω–µ –∑–∞—Ç–µ–º–Ω—è–π –ø–æ –≤—Å–µ–π –¥–ª–∏–Ω–µ\n"
            "‚Ä¢ –º–∞–∫—Å–∏–º—É–º ‚Äî –≤–Ω–µ—à–Ω—è—è —Ç—Ä–µ—Ç—å\n\n"
            "üñ§ **–¢—É—à—å:**\n"
            "‚Ä¢ 1‚Äì2 —Å–ª–æ—è, –±–µ–∑ ‚Äú–ø–∞—É—á—å–∏—Ö –ª–∞–ø–æ–∫‚Äù\n\n"
            "‚úÖ **–ë—ã—Å—Ç—Ä—ã–π —á–µ–∫:** –µ—Å–ª–∏ –Ω–∏–∑ –≥–ª–∞–∑–∞ –ª—ë–≥–∫–∏–π ‚Äî –º–∞–∫–∏—è–∂ –≤—ã–≥–ª—è–¥–∏—Ç –¥–æ—Ä–æ–∂–µ.\n\n"
            "‚ùå **–û—à–∏–±–∫–∞ –Ω–æ–≤–∏—á–∫–∞:** –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ç—ë–º–Ω—ã–π –≤–µ—Ä—Ö + —Ç—ë–º–Ω—ã–π –Ω–∏–∑ (—É—Ç—è–∂–µ–ª—è–µ—Ç –≤–∑–≥–ª—è–¥)."
        )

    # almond
    return (
        "## üëÅ –ú–∏–Ω–¥–∞–ª–µ–≤–∏–¥–Ω—ã–µ –≥–ª–∞–∑–∞ ‚Äî –ø–æ–¥—á–µ—Ä–∫–Ω—É—Ç—å —Ñ–æ—Ä–º—É\n\n"
        "üéØ **–ó–∞–¥–∞—á–∞ –º–∞–∫–∏—è–∂–∞:** –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –ø–æ–¥—á–µ—Ä–∫–Ω—É—Ç—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—É—é —Ñ–æ—Ä–º—É.\n\n"
        "üó∫ **–ö–∞—Ä—Ç–∞ –∑–æ–Ω:**\n"
        "‚Ä¢ **–°–≤–µ—Ç** ‚Äî –ø–æ–¥–≤–∏–∂–Ω–æ–µ –≤–µ–∫–æ\n"
        "‚Ä¢ **–¢–µ–Ω—å** ‚Äî –≤–Ω–µ—à–Ω–∏–π —É–≥–æ–ª\n"
        "‚Ä¢ **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —É–≥–æ–ª** ‚Äî —á—É—Ç—å-—á—É—Ç—å —Å–≤–µ—Ç–∞, –±–µ–∑ –ø–µ—Ä–µ–±–æ—Ä–∞\n\n"
        "‚úèÔ∏è **–§–æ—Ä–º–∞ —Ä–∞—Å—Ç—É—à—ë–≤–∫–∏:**\n"
        "‚Ä¢ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–æ–Ω–∞–ª—å –≤ —Å—Ç–æ—Ä–æ–Ω—É –≤–∏—Å–∫–∞\n"
        "‚Ä¢ –º—è–≥–∫–æ, –±–µ–∑ —á—ë—Ç–∫–∏—Ö –≥—Ä–∞–Ω–∏—Ü\n\n"
        "üñå **–ü–æ–¥–≤–æ–¥–∫–∞:**\n"
        "‚Ä¢ –∏–¥–µ–∞–ª—å–Ω–æ ‚Äî –º—è–≥–∫–∞—è —Å—Ç—Ä–µ–ª–∫–∞ —Ç–µ–Ω—è–º–∏\n"
        "‚Ä¢ —Ö–≤–æ—Å—Ç–∏–∫ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∏–∂–Ω–µ–≥–æ –≤–µ–∫–∞\n\n"
        "üëÅ **–ù–∏–∂–Ω–µ–µ –≤–µ–∫–æ:**\n"
        "‚Ä¢ –ª—ë–≥–∫–∞—è —Ç–µ–Ω—å –≤–æ –≤–Ω–µ—à–Ω–µ–π —Ç—Ä–µ—Ç–∏\n\n"
        "üñ§ **–¢—É—à—å:**\n"
        "‚Ä¢ –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —Ä–µ—Å–Ω–∏—Ü—ã\n\n"
        "‚úÖ **–ë—ã—Å—Ç—Ä—ã–π —á–µ–∫:** –µ—Å–ª–∏ —Ñ–æ—Ä–º–∞ ‚Äú—Ç—è–Ω–µ—Ç—Å—è‚Äù –∫ –≤–∏—Å–∫—É ‚Äî —ç—Ç–æ —Ç–æ—Ç —Å–∞–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç.\n\n"
        "‚ùå **–û—à–∏–±–∫–∞ –Ω–æ–≤–∏—á–∫–∞:** –¥–µ–ª–∞—Ç—å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∞–∫—Ü–µ–Ω—Ç–æ–≤ —Å—Ä–∞–∑—É."
    )


# ===== Face steps (detailed) =====
def face_steps(a: Answers) -> str:
    # –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–æ–Ω–∞–º –ª–∏—Ü–∞
    prep = "1Ô∏è‚É£ **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:** –∫—Ä–µ–º/–≥–µ–ª—å. –ü–æ–¥–æ–∂–¥–∏ 2‚Äì3 –º–∏–Ω—É—Ç—ã."
    if a.skin == "oily":
        prep = "1Ô∏è‚É£ **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:** –ª—ë–≥–∫–∏–π –≥–µ–ª—å/–∫—Ä–µ–º. –ü–æ–¥–æ–∂–¥–∏ 2‚Äì3 –º–∏–Ω—É—Ç—ã."

    tone = "2Ô∏è‚É£ **–¢–æ–Ω:** —Ç–æ–Ω–∫–∏–π —Å–ª–æ–π. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –ª—É—á—à–µ –≤—Ç–æ—Ä–æ–π —Ç–æ–Ω–∫–∏–π, —á–µ–º –æ–¥–∏–Ω –ø–ª–æ—Ç–Ω—ã–π."
    concealer = "3Ô∏è‚É£ **–ö–æ–Ω—Å–∏–ª–µ—Ä:** —Ç–æ—á–µ—á–Ω–æ (–ø–æ–∫—Ä–∞—Å–Ω–µ–Ω–∏—è/–ø—Ä—ã—â–∏–∫–∏). –ü–æ–¥ –≥–ª–∞–∑–∞ ‚Äî —Ç–æ–Ω–∫–æ, —Ç–æ–ª—å–∫–æ –≥–¥–µ —Ç–µ–º–Ω–æ—Ç–∞."
    powder = "4Ô∏è‚É£ **–ü—É–¥—Ä–∞:** —Ç–æ–ª—å–∫–æ —Ç–∞–º, –≥–¥–µ –±–ª–µ—Å—Ç–∏—Ç (–æ–±—ã—á–Ω–æ –¢-–∑–æ–Ω–∞)."
    if a.skin == "dry":
        powder = "4Ô∏è‚É£ **–ü—É–¥—Ä–∞:** –º–∏–Ω–∏–º—É–º (–ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ ‚Äî —Ç–æ–ª—å–∫–æ –¢-–∑–æ–Ω–∞)."

    blush = "5Ô∏è‚É£ **–†—É–º—è–Ω–∞:** –≤—ã—à–µ ‚Äú—è–±–ª–æ—á–µ–∫‚Äù ‚Üí –∫ –≤–∏—Å–∫–∞–º (–ª–∏—Ñ—Ç–∏–Ω–≥)."
    highlight = "6Ô∏è‚É£ **–í—ã—Å–≤–µ—Ç–ª–∏—Ç—å (–ø–æ –∂–µ–ª–∞–Ω–∏—é):** –≤–µ—Ä—Ö —Å–∫—É–ª—ã, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —É–≥–æ–ª–æ–∫ –≥–ª–∞–∑–∞ (—á—É—Ç—å-—á—É—Ç—å)."
    contour = "7Ô∏è‚É£ **–ó–∞—Ç–µ–º–Ω–∏—Ç—å (–ø–æ –∂–µ–ª–∞–Ω–∏—é):** –º—è–≥–∫–æ –ø–æ–¥ —Å–∫—É–ª—É –∏ –ø–æ –ª–∏–Ω–∏–∏ —Ä–æ—Å—Ç–∞ –≤–æ–ª–æ—Å (–Ω–µ –≤ —Ü–µ–Ω—Ç—Ä –ª–∏—Ü–∞)."

    extra = ""
    if a.occasion == "date":
        extra = "‚ú® –î–ª—è —Å–≤–∏–¥–∞–Ω–∏—è: –æ—Å—Ç–∞–≤—å –∫–æ–∂—É –∂–∏–≤–æ–π, —Å–¥–µ–ª–∞–π –º—è–≥–∫–∏–π —Ä—É–º—è–Ω–µ—Ü –∏ –Ω–µ–∂–Ω—ã–µ –≥—É–±—ã."
    elif a.occasion == "party":
        extra = "‚ú® –î–ª—è –ø—Ä–∞–∑–¥–Ω–∏–∫–∞: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥–ª–∞–∑–∞–º, –Ω–æ –±–µ–∑ —Ç—è–∂—ë–ª–æ–≥–æ –Ω–∏–∑–∞."
    elif a.occasion == "photo":
        extra = "‚ú® –î–ª—è —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ: –º–µ–Ω—å—à–µ —Å–∏–ª—å–Ω–æ–≥–æ –±–ª–µ—Å–∫–∞, –±–æ–ª—å—à–µ –∞–∫–∫—É—Ä–∞—Ç–Ω—ã—Ö –º–∞—Ç–æ–≤—ã—Ö/—Å–∞—Ç–∏–Ω–æ–≤—ã—Ö —Ç–µ–∫—Å—Ç—É—Ä."

    return "\n".join([prep, tone, concealer, powder, blush, highlight, contour]) + ("\n\n" + extra if extra else "")


# ===== Lips =====
def lips_line(a: Answers) -> str:
    if a.occasion == "party":
        return "üëÑ **–ì—É–±—ã:** –Ω—é–¥ –∏–ª–∏ —á—É—Ç—å —è—Ä—á–µ (–µ—Å–ª–∏ –≥–ª–∞–∑–∞ —Å–ø–æ–∫–æ–π–Ω—ã–µ)."
    if a.occasion == "date":
        return "üëÑ **–ì—É–±—ã:** –º—è–≥–∫–∏–π –Ω—é–¥/–±–ª–µ—Å–∫ (–∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ –∏ —Å–≤–µ–∂–æ)."
    if a.occasion == "photo":
        return "üëÑ **–ì—É–±—ã:** –Ω—é–¥ –±–µ–∑ —Å–∏–ª—å–Ω–æ–≥–æ –≥–ª—è–Ω—Ü–∞ (—á—Ç–æ–±—ã –Ω–µ –±–ª–∏–∫–æ–≤–∞–ª–æ)."
    return "üëÑ **–ì—É–±—ã:** –Ω—é–¥/–±–ª–µ—Å–∫ –ø–æ –ø–æ–¥—Ç–æ–Ω—É."


# ===== Mistakes =====
def main_mistake(a: Answers) -> str:
    if a.eyes == "hooded":
        return "—á—ë—Ç–∫–∞—è –ª–∏–Ω–∏—è –ø–æ —Å–∫–ª–∞–¥–∫–µ –∏ —Ç–æ–ª—Å—Ç–∞—è —Å—Ç—Ä–µ–ª–∫–∞ ‚Äî ‚Äú—Å—ä–µ–¥–∞—é—Ç‚Äù –≤–µ–∫–æ"
    if a.eyes == "small":
        return "—Ç—ë–º–Ω—ã–µ —Ç–µ–Ω–∏ –ø–æ –≤—Å–µ–º—É –≤–µ–∫—É –∏ –∞–∫—Ç–∏–≤–Ω—ã–π –Ω–∏–∑ ‚Äî —É–º–µ–Ω—å—à–∞—é—Ç –≥–ª–∞–∑–∞"
    if a.skin == "dry":
        return "–ø–ª–æ—Ç–Ω—ã–π –º–∞—Ç–æ–≤—ã–π —Ç–æ–Ω –∏ –º–Ω–æ–≥–æ –ø—É–¥—Ä—ã ‚Äî –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞—é—Ç —Å—É—Ö–æ—Å—Ç—å"
    if a.skin == "oily":
        return "–ø–ª–æ—Ç–Ω—ã–π —Ç–æ–Ω —Ç–æ–ª—Å—Ç—ã–º —Å–ª–æ–µ–º ‚Äî –±—ã—Å—Ç—Ä–µ–µ ‚Äú–ø–æ–ø–ª—ã–≤—ë—Ç‚Äù"
    if a.occasion == "photo":
        return "–∫—Ä—É–ø–Ω—ã–π –±–ª–µ—Å–∫/–≥–ª–∏—Ç—Ç–µ—Ä ‚Äî —á–∞—Å—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –Ω–µ–∞–∫–∫—É—Ä–∞—Ç–Ω–æ –≤ –∫–∞–¥—Ä–µ"
    return "–ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å –ª–∏—Ü–æ –ª–∏—à–Ω–∏–º–∏ —Å–ª–æ—è–º–∏"


# ===== Formula =====
def formula_line(a: Answers) -> str:
    if a.eyes == "small":
        return "‚ú® **–§–æ—Ä–º—É–ª–∞:** —Å–≤–µ—Ç –≤–Ω—É—Ç—Ä–∏ ‚Üí —Ç–µ–Ω—å —Å–Ω–∞—Ä—É–∂–∏ ‚Üí —Ä–∞—Å—Ç—É—à—ë–≤–∫–∞ –≤–≤–µ—Ä—Ö"
    if a.eyes == "hooded":
        return "‚ú® **–§–æ—Ä–º—É–ª–∞:** —Ç–µ–Ω—å –≤—ã—à–µ —Å–∫–ª–∞–¥–∫–∏ ‚Üí –º—è–≥–∫–∏–µ –ª–∏–Ω–∏–∏ ‚Üí –ª–∏—Ñ—Ç–∏–Ω–≥ –≤–≤–µ—Ä—Ö"
    if a.eyes == "big":
        return "‚ú® **–§–æ—Ä–º—É–ª–∞:** –º—è–≥–∫–∞—è –≥–ª—É–±–∏–Ω–∞ ‚Üí —á–∏—Å—Ç—ã–π –Ω–∏–∑ ‚Üí –∞–∫–∫—É—Ä–∞—Ç–Ω–∞—è —Ç—É—à—å"
    return "‚ú® **–§–æ—Ä–º—É–ª–∞:** —Å–≤–µ—Ç –Ω–∞ –≤–µ–∫–æ ‚Üí —Ç–µ–Ω—å –≤–æ –≤–Ω–µ—à–Ω–∏–π —É–≥–æ–ª ‚Üí –¥–∏–∞–≥–æ–Ω–∞–ª—å –∫ –≤–∏—Å–∫—É"


# ===== Build text =====
def build_text(a: Answers, level: DetailLevel = "short") -> str:
    set_id = pick_photo_set(a)
    photo_links = image_links_for_set(set_id)

    header = (
        "üíÑ **–¢–≤–æ–π –∏–¥–µ–∞–ª—å–Ω—ã–π –º–∞–∫–∏—è–∂ (–ø–ª–∞–Ω):**\n\n"
        f"**–ö–æ–∂–∞:** {skin_line(a.skin)}\n"
        f"**–ü–æ–¥—Ç–æ–Ω:** {undertone_line(a.undertone)}\n"
        f"**–ì–ª–∞–∑–∞:** {eyes_short(a.eyes)}\n\n"
        f"{palette_hint(a.undertone)}\n\n"
        "üì∏ **–ü—Ä–∏–º–µ—Ä—ã –º–∞–∫–∏—è–∂–∞ (–≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ):**\n"
        f"{photo_links}\n"
    )

    if level == "short":
        return (
            header
            + "\n**–°—Ö–µ–º–∞ (–∫–æ—Ä–æ—Ç–∫–æ):**\n"
            "1Ô∏è‚É£ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–∂–∏ ‚Üí —Ç–æ–Ω —Ç–æ–Ω–∫–æ\n"
            "2Ô∏è‚É£ –†—É–º—è–Ω–∞ –≤—ã—à–µ —Å–∫—É–ª—ã ‚Üí –∫ –≤–∏—Å–∫–∞–º\n"
            "3Ô∏è‚É£ –ì–ª–∞–∑–∞: —Å–≤–µ—Ç –≤–Ω—É—Ç—Ä–∏ + —Ç–µ–Ω—å —Å–Ω–∞—Ä—É–∂–∏ (–º—è–≥–∫–æ)\n"
            "4Ô∏è‚É£ –¢—É—à—å: –≤—Ç–æ—Ä–æ–π —Å–ª–æ–π –≤–æ –≤–Ω–µ—à–Ω–∏–π —É–≥–æ–ª\n"
            f"{lips_line(a)}\n\n"
            f"‚ùå **–ß–∞—Å—Ç–∞—è –æ—à–∏–±–∫–∞:** {main_mistake(a)}\n"
            f"{formula_line(a)}\n\n"
            "‚û°Ô∏è –ù–∞–∂–º–∏ **¬´–ü–æ–¥—Ä–æ–±–Ω–µ–µ¬ª**, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å—Ö–µ–º—É –ø–æ –∑–æ–Ω–∞–º (–≥–¥–µ –≤—ã—Å–≤–µ—Ç–ª–∏—Ç—å/–∑–∞—Ç–µ–º–Ω–∏—Ç—å)."
        )

    # full
    return (
        header
        + "\n**–ü–æ–¥—Ä–æ–±–Ω–µ–µ (–ø–æ—à–∞–≥–æ–≤–æ):**\n"
        + face_steps(a)
        + "\n\n"
        + eyes_full(a.eyes)
        + "\n\n"
        + lips_line(a)
        + "\n\n"
        + f"‚ùå **–ß–∞—Å—Ç–∞—è –æ—à–∏–±–∫–∞:** {main_mistake(a)}\n"
        + formula_line(a)
    )
